---
import ProjectCard from '@components/ProjectCard.astro';
import SiteLayout from '@components/SiteLayout.astro';
import { getCoverAsset, getPublishedProjects } from '@lib/catalog';

const projects = getPublishedProjects();
const graphicProjects = projects.filter((project) => project.discipline === 'graphic');
const threeDProjects = projects.filter((project) => project.discipline === '3d');
---

<SiteLayout title="Raymondo Portfolio" description="Graphic and 3D design portfolio for Raymondo.">
  <main class="shell">
    <header class="site-header">
      <h1 class="brand">Raymondo</h1>
      <nav class="site-nav">
        <a href="#work">Work</a>
        <a href="#about">About</a>
        <a href="mailto:hello@raymondo.design">Contact</a>
      </nav>
    </header>

    <section class="hero" id="about">
      <h2>Graphic Design and 3D Worlds</h2>
      <p>
        Raymondo builds identities, editorial systems, and 3D forms with a tactile visual language.
        Each project page includes theme inspiration, design DNA, and process cues.
      </p>
    </section>

    <section id="work" aria-label="Portfolio projects">
      <div class="filter-bar" id="filterBar">
        <button class="filter-chip" data-filter="all" aria-pressed="true" type="button">All</button>
        <button class="filter-chip" data-filter="graphic" aria-pressed="false" type="button">Graphic</button>
        <button class="filter-chip" data-filter="3d" aria-pressed="false" type="button">3D</button>
      </div>
      <div class="discipline-group" data-discipline-group="graphic">
        <h3 style="font-family:var(--font-display);text-transform:uppercase;letter-spacing:0.08em;font-size:0.84rem;margin:0.3rem 0 0.8rem;">
          Graphic Design
        </h3>
        <div class="gallery-grid">
          {graphicProjects.map((project) => <ProjectCard project={project} coverAsset={getCoverAsset(project)} />)}
        </div>
      </div>
      <div class="discipline-group" data-discipline-group="3d">
        <h3 style="font-family:var(--font-display);text-transform:uppercase;letter-spacing:0.08em;font-size:0.84rem;margin:0.3rem 0 0.8rem;">
          3D Design
        </h3>
        <div class="gallery-grid">
          {threeDProjects.map((project) => <ProjectCard project={project} coverAsset={getCoverAsset(project)} />)}
        </div>
      </div>
    </section>

    <footer class="site-footer">
      <p>Available for identity, visual systems, and 3D direction work.</p>
      <p>hello@raymondo.design</p>
    </footer>
  </main>

  <script>
    const chips = Array.from(document.querySelectorAll<HTMLButtonElement>('.filter-chip'));
    const groups = Array.from(document.querySelectorAll<HTMLElement>('[data-discipline-group]'));

    chips.forEach((chip) => {
      chip.addEventListener('click', () => {
        const filter = chip.dataset.filter;

        chips.forEach((item) => {
          item.setAttribute('aria-pressed', item === chip ? 'true' : 'false');
        });

        groups.forEach((group) => {
          const discipline = group.dataset.disciplineGroup;
          const match = filter === 'all' || discipline === filter;
          group.style.display = match ? '' : 'none';
        });
      });
    });
  </script>
</SiteLayout>
