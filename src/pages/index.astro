---
import ProjectCard from '@components/ProjectCard.astro';
import SiteLayout from '@components/SiteLayout.astro';
import { getCoverAsset, getPublishedProjects } from '@lib/catalog';

const projects = getPublishedProjects();
---

<SiteLayout title="Raymondo Portfolio" description="Graphic and 3D design portfolio for Raymondo.">
  <main class="shell">
    <header class="site-header" data-mobile-nav>
      <h1 class="brand">Raymondo</h1>
      <button
        type="button"
        class="mobile-nav-toggle"
        data-mobile-nav-toggle
        aria-expanded="false"
        aria-controls="homeSiteNav"
        aria-label="Open navigation menu"
      >
        <span class="mobile-nav-toggle-icon" aria-hidden="true"></span>
      </button>
      <nav class="site-nav" id="homeSiteNav" data-mobile-nav-panel>
        <a href="#work">Work</a>
        <a href="#about">About</a>
        <a href="mailto:raymondartguy@gmail.com">Contact</a>
      </nav>
    </header>

    <section class="hero" id="about">
      <h2>Graphic Design and 3D Worlds</h2>
      <p>
        Raymondo builds identities, editorial systems, and 3D forms with a tactile visual language.
        Each project page includes theme inspiration, design DNA, and process cues.
      </p>
    </section>

    <section id="work" aria-label="Portfolio projects">
      <div class="filter-bar" id="filterBar">
        <button class="filter-chip" data-filter="all" aria-pressed="true" type="button">All</button>
        <button class="filter-chip" data-filter="graphic" aria-pressed="false" type="button">Graphic</button>
        <button class="filter-chip" data-filter="3d" aria-pressed="false" type="button">3D</button>
      </div>
      <div class="gallery-grid" id="galleryGrid">
        {projects.map((project) => <ProjectCard project={project} coverAsset={getCoverAsset(project)} />)}
      </div>
    </section>

    <footer class="site-footer">
      <p>Available for identity, visual systems, and 3D direction work.</p>
      <p>raymondartguy@gmail.com</p>
    </footer>
  </main>

  <script>
    const chips = Array.from(document.querySelectorAll('.filter-chip'));
    const cards = Array.from(document.querySelectorAll('#galleryGrid .card'));

    function applyFilter(nextFilter, activeChip) {
      const filter = String(nextFilter || 'all').toLowerCase();

      chips.forEach((item) => {
        item.setAttribute('aria-pressed', item === activeChip ? 'true' : 'false');
      });

      cards.forEach((card) => {
        const discipline = String(card.dataset.discipline || '').toLowerCase();
        const match = filter === 'all' || discipline === filter;
        if (match) {
          card.removeAttribute('hidden');
        } else {
          card.setAttribute('hidden', '');
        }
      });
    }

    chips.forEach((chip) => {
      chip.addEventListener('click', () => {
        applyFilter(chip.dataset.filter, chip);
      });
    });
  </script>
</SiteLayout>
