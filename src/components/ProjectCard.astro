---
import type { Asset, Project } from '@lib/types';

interface Props {
  project: Project;
  coverAsset?: Asset;
}

const { project, coverAsset } = Astro.props;
const href = `/projects/${project.slug}/`;
---

<a class="card" href={href} data-discipline={project.discipline}>
  <div class="card-media">
    {
      coverAsset ? (
        <img src={coverAsset.url} alt={coverAsset.altText || `${project.title} cover`} loading="lazy" />
      ) : (
        <div class="card-empty">No cover yet</div>
      )
    }
    <div class="card-overlay">
      <p class="card-title">{project.title}</p>
      <p class="card-meta">{project.descriptionShort}</p>
      <div class="tag-row">
        <span class="tag">{project.discipline === '3d' ? '3D' : 'Graphic'}</span>
        {project.tags.slice(0, 3).map((tag) => <span class="tag">{tag}</span>)}
      </div>
    </div>
  </div>
</a>
